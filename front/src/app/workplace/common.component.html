<button
    [ngClass]="{'pull-right fa fa-refresh text-success btn btn-light mb-3': true, 'fa-spin': loading}"
    [disabled]="loading" (click)="load()" title="Обновити"></button>
<div class="mb-3" *ngIf="item?.patient">
    <h2 class="title">{{item.talon.procedure.name}}</h2>
    <h4 class="title">{{item.patient.person.fullName}}</h4>
    <div class="row mb-2">
        <div class="col">
            <button class="btn btn-primary btn-lg btn-block" [style.min-height.px]="100"
                (click)="startProcedure()" [hidden]="procedureStarted">
                <h3 class="font-weight-bold">
                    РОЗПОЧАТИ<br />ПРОЦЕДУРУ
                </h3>
            </button>
            <form name="formExecute" (ngSubmit)="fe.form.valid && executeProcedure()" #fe="ngForm"
                novalidate [hidden]="!procedureStarted">
                <button class="btn btn-success btn-lg btn-block" [style.min-height.px]="100">
                    <h3 class="font-weight-bold">
                        ЗАВЕРШИТИ<br />ПРОЦЕДУРУ
                    </h3>
                </button>
            </form>
        </div>
        <div class="col">
            <button class="btn btn-danger btn-lg btn-block" [style.min-height.px]="100"
                (click)="cancelProcedure()" [hidden]="!procedureStarted">
                <h3 class="font-weight-bold">
                    СКАCУВАТИ<br />ПРОЦЕДУРУ
                </h3>
            </button>
        </div>
    </div>
    <div class="row mb-2" [hidden]="!procedureStarted">
        <div class="col btn-group" role="group">
            <button class="btn btn-info btn-lg" (click)="subZone()"><i class="fa fa-minus fa-5x"></i></button>
            <button class="btn btn-light btn-lg btn-block">
                <h4>Зон:</h4>
                <h4>{{item.talon?.zones}}</h4>
            </button>
            <button class="btn btn-info btn-lg" (click)="addZone()"><i class="fa fa-plus fa-5x"></i></button>
        </div>
    </div>
    <div class="card mb-2">
        <div class="card-header">
            <h4>Діагноз</h4>
        </div>
        <div class="card-body">
            <p>
                <span>Код:</span> <strong>{{item.patient.therapy?.codeDiag}}</strong>
            </p>
            <p>{{item.patient.therapy?.diag}}</p>
        </div>
    </div>
    <div class="card mb-2">
        <div class="card-header">
            <h4>Зони</h4>
        </div>
        <div class="card-body p-0">
            <canvas #canvas width="500" height="500"></canvas>
        </div>
    </div>
    <div class="card mb-2">
        <div class="card-header">
            <h4>Нотатки</h4>
        </div>
        <div class="card-body">
            <p>{{item.patient.therapy?.notes}}</p>
        </div>
    </div>
    <div class="card mb-5">
        <div class="card-header">
            <h4>Коментарі</h4>
        </div>
        <div class="card-body" [innerHTML]="item.talon.desc"></div>
    </div>
    <label for="comment">Додати коментар:</label>
    <textarea rows="5" class="form-control" [(ngModel)]="model.comment"></textarea>
    <button class="btn btn-primary pull-right mb-3" [disabled]="model.comment == ''"
        (click)="comment()">Додати</button>
</div>